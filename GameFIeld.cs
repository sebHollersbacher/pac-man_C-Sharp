namespace pac_man
{
    internal class GameField
    {
        public int Width { get; }
        public int Height { get; }

        private char[][] Field = {
            ['▒','▒','▒','▒','▒','▒','▒','▒','▒','▒','▒','▒','▒','▒','▒','▒','▒','▒','▒','▒','▒','▒','▒','▒','▒','▒','▒','▒'],
            ['▒','·','·','·','·','·','·','·','·','·','·','·','·','▒','▒','·','·','·','·','·','·','·','·','·','·','·','·','▒'],
            ['▒','·','▒','▒','▒','▒','·','▒','▒','▒','▒','▒','·','▒','▒','·','▒','▒','▒','▒','▒','·','▒','▒','▒','▒','·','▒'],
            ['▒','·','▒','▒','▒','▒','·','▒','▒','▒','▒','▒','·','▒','▒','·','▒','▒','▒','▒','▒','·','▒','▒','▒','▒','·','▒'],
            ['▒','·','▒','▒','▒','▒','·','▒','▒','▒','▒','▒','·','▒','▒','·','▒','▒','▒','▒','▒','·','▒','▒','▒','▒','·','▒'],
            ['▒','·','·','·','·','·','·','·','·','·','·','·','·','·','·','·','·','·','·','·','·','·','·','·','·','·','·','▒'],
            ['▒','·','▒','▒','▒','▒','·','▒','▒','·','▒','▒','▒','▒','▒','▒','▒','▒','·','▒','▒','·','▒','▒','▒','▒','·','▒'],
            ['▒','·','▒','▒','▒','▒','·','▒','▒','·','▒','▒','▒','▒','▒','▒','▒','▒','·','▒','▒','·','▒','▒','▒','▒','·','▒'],
            ['▒','·','·','·','·','·','·','▒','▒','·','·','·','·','▒','▒','·','·','·','·','▒','▒','·','·','·','·','·','·','▒'],
            ['▒','▒','▒','▒','▒','▒','·','▒','▒','▒','▒','▒',' ','▒','▒',' ','▒','▒','▒','▒','▒','·','▒','▒','▒','▒','▒','▒'],
            [' ',' ',' ',' ',' ','▒','·','▒','▒','▒','▒','▒',' ','▒','▒',' ','▒','▒','▒','▒','▒','·','▒',' ',' ',' ',' ',' '],
            [' ',' ',' ',' ',' ','▒','·','▒','▒',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ','▒','▒','·','▒',' ',' ',' ',' ',' '],
            [' ',' ',' ',' ',' ','▒','·','▒','▒',' ','▒','▒','▒','▒','▒','▒','▒','▒',' ','▒','▒','·','▒',' ',' ',' ',' ',' '],
            ['▒','▒','▒','▒','▒','▒','·','▒','▒',' ','▒','▒','▒','▒','▒','▒','▒','▒',' ','▒','▒','·','▒','▒','▒','▒','▒','▒'],
            [' ',' ',' ',' ',' ',' ',' ',' ',' ',' ','▒','▒','▒','▒','▒','▒','▒','▒',' ',' ',' ',' ',' ',' ',' ',' ',' ',' '],
            ['▒','▒','▒','▒','▒','▒','·','▒','▒',' ','▒','▒','▒','▒','▒','▒','▒','▒',' ','▒','▒','·','▒','▒','▒','▒','▒','▒'],
            [' ',' ',' ',' ',' ','▒','·','▒','▒',' ','▒','▒','▒','▒','▒','▒','▒','▒',' ','▒','▒','·','▒',' ',' ',' ',' ',' '],
            [' ',' ',' ',' ',' ','▒','·','▒','▒',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ','▒','▒','·','▒',' ',' ',' ',' ',' '],
            ['▒','▒','▒','▒','▒','▒','·','▒','▒',' ','▒','▒','▒','▒','▒','▒','▒','▒',' ','▒','▒','·','▒','▒','▒','▒','▒','▒'],
            ['▒','·','·','·','·','·','·','·','·','·','·','·','·','▒','▒','·','·','·','·','·','·','·','·','·','·','·','·','▒'],
            ['▒','·','▒','▒','▒','▒','·','▒','▒','▒','▒','▒','·','▒','▒','·','▒','▒','▒','▒','▒','·','▒','▒','▒','▒','·','▒'],
            ['▒','·','▒','▒','▒','▒','·','▒','▒','▒','▒','▒','·','▒','▒','·','▒','▒','▒','▒','▒','·','▒','▒','▒','▒','·','▒'],
            ['▒','·','·','·','▒','▒','·','·','·','·','·','·','·',' ',' ','·','·','·','·','·','·','·','▒','▒','·','·','·','▒'],
            ['▒','▒','▒','·','▒','▒','·','▒','▒','·','▒','▒','▒','▒','▒','▒','▒','▒','·','▒','▒','·','▒','▒','·','▒','▒','▒'],
            ['▒','▒','▒','·','▒','▒','·','▒','▒','·','▒','▒','▒','▒','▒','▒','▒','▒','·','▒','▒','·','▒','▒','·','▒','▒','▒'],
            ['▒','·','·','·','·','·','·','▒','▒','·','·','·','·','▒','▒','·','·','·','·','▒','▒','·','·','·','·','·','·','▒'],
            ['▒','·','▒','▒','▒','▒','▒','▒','▒','▒','▒','▒','·','▒','▒','·','▒','▒','▒','▒','▒','▒','▒','▒','▒','▒','·','▒'],
            ['▒','·','▒','▒','▒','▒','▒','▒','▒','▒','▒','▒','·','▒','▒','·','▒','▒','▒','▒','▒','▒','▒','▒','▒','▒','·','▒'],
            ['▒','·','·','·','·','·','·','·','·','·','·','·','·','·','·','·','·','·','·','·','·','·','·','·','·','·','·','▒'],
            ['▒','▒','▒','▒','▒','▒','▒','▒','▒','▒','▒','▒','▒','▒','▒','▒','▒','▒','▒','▒','▒','▒','▒','▒','▒','▒','▒','▒']
        };

        public GameField()
        {
            Height = Field.GetLength(0);
            Width = Field[0].GetLength(0);
        }

        public void UpdatePlayerPos((int x, int y) newPos)
        {
            Console.SetCursorPosition(newPos.y, newPos.x);
            Console.Write('O');
            Console.SetCursorPosition(0, 0);
        }

        public bool ValidPosition((int x, int y) pos)
        {
            if (pos.x < 0 || Height <= pos.x) return false;
            if (pos.y < 0 || Width <= pos.y) return false;

            char c = Field[pos.x][pos.y];
            return c is ' ' or '·';
        }

        public void Redraw()
        {
            for (int i = 0; i < Height; i++)
            {
                Console.SetCursorPosition(0, i);
                Console.Write(Field[i]);
                Console.SetCursorPosition(0, 0);
            }
        }
    }
}
